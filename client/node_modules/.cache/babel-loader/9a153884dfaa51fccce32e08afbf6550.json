{"ast":null,"code":"import _classCallCheck from\"/home/adrian/Workspace/TwitterClone/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/adrian/Workspace/TwitterClone/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/adrian/Workspace/TwitterClone/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/adrian/Workspace/TwitterClone/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/adrian/Workspace/TwitterClone/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React from\"react\";import axios from\"axios\";import{Redirect}from\"react-router-dom\";var Login=/*#__PURE__*/function(_React$Component){_inherits(Login,_React$Component);function Login(){var _getPrototypeOf2;var _this;_classCallCheck(this,Login);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(Login)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={redirect:false};return _this;}_createClass(Login,[{key:\"handleClick\",value:function handleClick(){var _this2=this;var formUsername=document.getElementById(\"login-username\").value;var formPassword=document.getElementById(\"login-password\").value;axios({method:\"post\",url:\"https://quiet-chamber-54675.herokuapp.com/auth\",data:{username:formUsername,password:formPassword}}).then(function(response){if(response.data.result===true){return axios.get(\"https://quiet-chamber-54675.herokuapp.com/users/\".concat(formUsername));}else{throw new Error(\"Username or password is wrong\");}}).then(function(response){console.log(response);localStorage.setItem(\"loggedIn\",\"true\");localStorage.setItem(\"_id\",response.data._id);localStorage.setItem(\"username\",response.data.username);localStorage.setItem(\"firstname\",response.data.firstname);localStorage.setItem(\"lastname\",response.data.lastname);}).then(function(){_this2.setState({redirect:true});_this2.props.login();}).catch(function(error){console.log(error);});}},{key:\"render\",value:function render(){if(this.state.redirect===true){return React.createElement(Redirect,{to:\"/\"});}return React.createElement(\"div\",{className:\"login-form\"},React.createElement(\"h1\",null,\"Login\"),React.createElement(\"div\",null,\"Username: \",React.createElement(\"input\",{id:\"login-username\",type:\"text\"}),React.createElement(\"br\",null),\"Password: \",React.createElement(\"input\",{id:\"login-password\",type:\"password\"}),React.createElement(\"br\",null),React.createElement(\"button\",{onClick:this.handleClick.bind(this)},\"Login\")));}}]);return Login;}(React.Component);export default Login;","map":{"version":3,"sources":["/home/adrian/Workspace/TwitterClone/client/src/components/pages/Login.js"],"names":["React","axios","Redirect","Login","state","redirect","formUsername","document","getElementById","value","formPassword","method","url","data","username","password","then","response","result","get","Error","console","log","localStorage","setItem","_id","firstname","lastname","setState","props","login","catch","error","handleClick","bind","Component"],"mappings":"mzBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,QAAT,KAAyB,kBAAzB,C,GAEMC,CAAAA,K,uYACJC,K,CAAQ,CACNC,QAAQ,CAAE,KADJ,C,kFAIM,iBACZ,GAAIC,CAAAA,YAAY,CAAGC,QAAQ,CAACC,cAAT,CAAwB,gBAAxB,EAA0CC,KAA7D,CACA,GAAIC,CAAAA,YAAY,CAAGH,QAAQ,CAACC,cAAT,CAAwB,gBAAxB,EAA0CC,KAA7D,CAEAR,KAAK,CAAC,CACJU,MAAM,CAAE,MADJ,CAEJC,GAAG,CACD,gDAHE,CAIJC,IAAI,CAAE,CAAEC,QAAQ,CAAER,YAAZ,CAA0BS,QAAQ,CAAEL,YAApC,CAJF,CAAD,CAAL,CAMGM,IANH,CAMQ,SAAAC,QAAQ,CAAI,CAChB,GAAIA,QAAQ,CAACJ,IAAT,CAAcK,MAAd,GAAyB,IAA7B,CAAmC,CACjC,MAAOjB,CAAAA,KAAK,CAACkB,GAAN,2DAC8Cb,YAD9C,EAAP,CAGD,CAJD,IAIO,CACL,KAAM,IAAIc,CAAAA,KAAJ,CAAU,+BAAV,CAAN,CACD,CACF,CAdH,EAeGJ,IAfH,CAeQ,SAAAC,QAAQ,CAAI,CAChBI,OAAO,CAACC,GAAR,CAAYL,QAAZ,EACAM,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAiC,MAAjC,EACAD,YAAY,CAACC,OAAb,CAAqB,KAArB,CAA4BP,QAAQ,CAACJ,IAAT,CAAcY,GAA1C,EACAF,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAiCP,QAAQ,CAACJ,IAAT,CAAcC,QAA/C,EACAS,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAkCP,QAAQ,CAACJ,IAAT,CAAca,SAAhD,EACAH,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAiCP,QAAQ,CAACJ,IAAT,CAAcc,QAA/C,EACD,CAtBH,EAuBGX,IAvBH,CAuBQ,UAAM,CACV,MAAI,CAACY,QAAL,CAAc,CAAEvB,QAAQ,CAAE,IAAZ,CAAd,EACA,MAAI,CAACwB,KAAL,CAAWC,KAAX,GACD,CA1BH,EA2BGC,KA3BH,CA2BS,SAAAC,KAAK,CAAI,CACdX,OAAO,CAACC,GAAR,CAAYU,KAAZ,EACD,CA7BH,EA8BD,C,uCAEQ,CACP,GAAI,KAAK5B,KAAL,CAAWC,QAAX,GAAwB,IAA5B,CAAkC,CAChC,MAAO,qBAAC,QAAD,EAAU,EAAE,CAAC,GAAb,EAAP,CACD,CAED,MACE,4BAAK,SAAS,CAAC,YAAf,EACE,sCADF,CAEE,4CACY,6BAAO,EAAE,CAAC,gBAAV,CAA2B,IAAI,CAAC,MAAhC,EADZ,CAEE,8BAFF,cAGY,6BAAO,EAAE,CAAC,gBAAV,CAA2B,IAAI,CAAC,UAAhC,EAHZ,CAIE,8BAJF,CAKE,8BAAQ,OAAO,CAAE,KAAK4B,WAAL,CAAiBC,IAAjB,CAAsB,IAAtB,CAAjB,UALF,CAFF,CADF,CAYD,C,mBA1DiBlC,KAAK,CAACmC,S,EA6D1B,cAAehC,CAAAA,KAAf","sourcesContent":["import React from \"react\";\nimport axios from \"axios\";\nimport { Redirect } from \"react-router-dom\";\n\nclass Login extends React.Component {\n  state = {\n    redirect: false\n  };\n\n  handleClick() {\n    let formUsername = document.getElementById(\"login-username\").value;\n    let formPassword = document.getElementById(\"login-password\").value;\n\n    axios({\n      method: \"post\",\n      url:\n        \"https://quiet-chamber-54675.herokuapp.com/auth\",\n      data: { username: formUsername, password: formPassword }\n    })\n      .then(response => {\n        if (response.data.result === true) {\n          return axios.get(\n            `https://quiet-chamber-54675.herokuapp.com/users/${formUsername}`\n          );\n        } else {\n          throw new Error(\"Username or password is wrong\");\n        }\n      })\n      .then(response => {\n        console.log(response);\n        localStorage.setItem(\"loggedIn\", \"true\");\n        localStorage.setItem(\"_id\", response.data._id);\n        localStorage.setItem(\"username\", response.data.username);\n        localStorage.setItem(\"firstname\", response.data.firstname);\n        localStorage.setItem(\"lastname\", response.data.lastname);\n      })\n      .then(() => {\n        this.setState({ redirect: true });\n        this.props.login();\n      })\n      .catch(error => {\n        console.log(error);\n      });\n  }\n\n  render() {\n    if (this.state.redirect === true) {\n      return <Redirect to=\"/\" />;\n    }\n\n    return (\n      <div className=\"login-form\">\n        <h1>Login</h1>\n        <div>\n          Username: <input id=\"login-username\" type=\"text\" />\n          <br />\n          Password: <input id=\"login-password\" type=\"password\" />\n          <br />\n          <button onClick={this.handleClick.bind(this)}>Login</button>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}